<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>26 - Code structuring</title>
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <!-- <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script> -->
        <script src="https://cdn.8thwall.com/web/xrextras/xrextras.js"></script>
        <script src='https://cdn.8thwall.com/web/landing-page/landing-page.js'></script>
        <script async src="https://apps.8thwall.com/xrweb?appKey=WjThgVG5uIRwOw0sD2a4CAe8GTcQwJyDssbcgcXhg08SbOtC4cfoSIV11lUUP4RBw0H51"></script>

        <script src="./aframe.js"></script>
        <script>
            AFRAME.registerComponent('test-model', {
                init: function() {
                    let el = this.el
                    const geometry = new THREE.BoxGeometry(1, 1, 1)
                    const material = new THREE.MeshBasicMaterial({ color: 0xff0000 })
                    const mesh = new THREE.Mesh(geometry, material)
                    el.object3D.add(mesh)
                }
            })
        </script>
    </head>
    <body>
    <!-- Three.js Canvas -->
    <!-- <canvas class="webgl"></canvas> -->
    <a-scene
        id="scene"
        xrextras-gesture-detector
        xrextras-loading
        xrextras-runtime-error
        xrweb="allowedDevices: any; cameraDirection: back; disableWorldTracking: false;"
        gltf-model="dracoDecoderPath: ../draco/"
        renderer="colorManagement: true; physicallyCorrectLights: true; alpha: false;"
    >
        <a-assets>
            <a-asset-item id="suzanne" src="../models/suzanne/suzanne.gltf"></a-asset-item>
            <a-asset-item id="music-panel" src="../models/music-panel.gltf"></a-asset-item>
            <a-asset-item id="merch-panel" src="../models/merch-panel.gltf"></a-asset-item>
            <img id="panel-texture" src="../textures/helmet/color_compressed.jpg">
            <img id="panel-ao-texture" src="../textures/helmet/ao_compressed.jpg">
            <img id="panel-displacement-texture" src="../textures/helmet/height_compressed.png">
            <img id="panel-normal-texture" src="../textures/helmet/normal_compressed.png">
        </a-assets> 
    
        <a-entity light="type: ambient; color: #bbb;"></a-entity>
        
        <a-entity light="type: directional; color: #fff; intensity: 1.6;" rotation="0 -45 0" position="1.0 1.8 2.0" target="#suzanne" >
        </a-entity>
        
        <a-entity 
            gltf-model="#suzanne"
            position="0.0 1.8 -3.0"
            scale="0.75 0.75 0.75"
            rotation="0 0 0"
            xrextras-one-finger-rotate
            animation="property: position; to: 0.0 1.825 -3.0; from: 0.0 1.8 -3.0; loop: true; easing: linear; dir: alternate;"
            animation__two="property: rotation; to: 0.0 360 0.0; loop: true; easing: linear; dur: 10000;"
        ></a-entity>   

        <a-entity
            gltf-model="#music-panel"
            scale=".5 .5 .5" 
            position="0.0 0.925 -2.0"
            rotation="-68.5 -180 0"
            animation="property: position; to: 0.0 0.85 -2.0; from: 0.0 0.825 -2.0; loop: true; easing: linear; dir: alternate;"
        >
        </a-entity>

        <a-entity
            gltf-model="#merch-panel"
            scale=".5 .5 .5" 
            position="0.0 0.42 -1.95"
            rotation="-68.5 -180 0"
            animation="property: position; to: 0.0 0.31 -1.95; from: 0.0 0.285 -1.95; loop: true; easing: linear; dir: alternate;"
        >
        </a-entity>

        <a-camera 
            position="0.0 1.6 0.0"
        >
        </a-camera>
    </a-scene>
  </body>
</html>